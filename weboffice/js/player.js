var player=function(opts){var opt=$.extend({},{imgField:null,oNav:null,curIndex:0,leftBtn:null,rightBtn:null,delayTime:300,highCls:"current",interval:5000},opts);var max=opt.imgField.length,q=null,T=null;var init=function(){var invoke=function(slideTime){var b=opt.imgField.eq(opt.curIndex);b.css("z-index","1");b.css("background","url("+b.attr("url")+") center top no-repeat");b.css("background-size","cover");b.siblings().css("z-index","0");b.stop().animate({opacity:1},slideTime);b.siblings().stop().animate({opacity:0},slideTime);opt.oNav.children().removeAttr("class").eq(opt.curIndex).addClass(opt.highCls)},autoPlay=function(){q=setTimeout(function(){max-1>opt.curIndex?opt.curIndex++:opt.curIndex=0;invoke(2000);autoPlay()},opt.interval)},hoverFun=function(){for(var i=0;i<max;i++){opt.oNav.append("<li>"+(i+1)+"</li>")}opt.oNav.children().hover(function(){var index=opt.oNav.children().index($(this));if(!opt.oNav.children().eq(index).is("."+opt.highCls)){opt.curIndex=index;T=setTimeout(function(){invoke(600)},opt.delayTime)}},function(){clearInterval(T)})};if(opt.leftBtn!=null&&opt.rightBtn!=null){(opt.leftBtn).add(opt.rightBtn).hover(function(){clearTimeout(q);(opt.leftBtn).add(opt.rightBtn).stop().fadeTo(0,1)},function(){(opt.leftBtn).add(opt.rightBtn).stop().fadeTo(0,0);autoPlay()});opt.leftBtn.click(function(){opt.curIndex>0?opt.curIndex--:opt.curIndex=max-1;invoke(600)});opt.rightBtn.click(function(){max-1>opt.curIndex?opt.curIndex++:opt.curIndex=0;invoke(600)})}invoke();autoPlay();hoverFun();opt.oNav.add(opt.imgField.parent()).hover(function(){clearTimeout(q);(opt.leftBtn!=null&&opt.rightBtn!=null)?opt.leftBtn.add(opt.rightBtn).css("opacity",0.6):null},function(){autoPlay();(opt.leftBtn!=null&&opt.rightBtn!=null)?opt.leftBtn.add(opt.rightBtn).css("opacity",0):null})};init()};player({imgField:$(".banner-img ul li"),oNav:$(".banner-nav ul"),curIndex:0,leftBtn:$(".left-btn"),rightBtn:$(".right-btn"),delayTime:100,highCls:"curr",interval:5000});